---
permalink: /search.json
layout: null
---
[
{% assign first = true %}

{%- comment -%} Posts with tags {%- endcomment -%}
{% for post in site.posts %}
  {% if post.tags and post.tags != empty %}
    {% unless first %},{% endunless %}{% assign first = false %}
    {
      "title": {{ post.title | jsonify }},
      "url": {{ post.url | relative_url | jsonify }},
      "tags": {{ post.tags | join: ', ' | jsonify }},
      "subject": {{ post.subject | default: "" | jsonify }}
    }
  {% endif %}
{% endfor %}

{%- comment -%} Pages with tags {%- endcomment -%}
{% for page in site.pages %}
  {% if page.tags and page.tags != empty %}
    {% unless first %},{% endunless %}{% assign first = false %}
    {
      "title": {{ page.title | default: page.name | jsonify }},
      "url": {{ page.url | relative_url | jsonify }},
      "tags": {{ page.tags | join: ', ' | jsonify }},
      "subject": {{ page.subject | default: "" | jsonify }}
    }
  {% endif %}
{% endfor %}
]
