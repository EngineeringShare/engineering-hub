<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .quiz-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            text-align: center;
        }

        .quiz-header {
            margin-bottom: 30px;
        }

        .quiz-title {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .quiz-stats {
            display: flex;
            justify-content: space-between;
            background: #f8f9fa;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        .timer {
            color: #e74c3c !important;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.5;
            font-weight: 500;
        }

        .answers {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        .answer-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .answer-btn:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .answer-btn.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .answer-btn.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .answer-btn:disabled {
            cursor: not-allowed;
        }

        .next-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: none;
        }

        .next-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .results {
            display: none;
        }

        .results.show {
            display: block;
        }

        .score {
            font-size: 3rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 20px;
        }

        .restart-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .restart-btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .quiz-container {
                padding: 20px;
            }
            
            .quiz-title {
                font-size: 2rem;
            }
            
            .quiz-stats {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1 class="quiz-title">üß† Quiz Challenge</h1>
        </div>

        <div class="quiz-stats">
            <div class="stat">
                <div class="stat-label">Question</div>
                <div class="stat-value" id="questionNumber">1 / 5</div>
            </div>
            <div class="stat">
                <div class="stat-label">Score</div>
                <div class="stat-value" id="currentScore">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">Time Left</div>
                <div class="stat-value timer" id="timeLeft">30s</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="quiz-content" id="quizContent">
            <div class="question-container">
                <div class="question" id="question">Loading question...</div>
                <div class="answers" id="answers"></div>
                <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Next Question</button>
            </div>
        </div>

        <div class="results" id="results">
            <h2>üéâ Quiz Complete!</h2>
            <div class="score" id="finalScore">0/0</div>
            <p id="scoreMessage">Great job!</p>
            <button class="restart-btn" onclick="restartQuiz()">Play Again</button>
        </div>
    </div>

    <script>
        // üéØ CUSTOMIZE YOUR QUIZ HERE üéØ
        // Format: "Question": ["Correct Answer", "Wrong Answer 1", "Wrong Answer 2", "Wrong Answer 3", TimeInSeconds]
        let gameData = {
            "What is an encoder, and why is it used in mechatronic systems?": [
                "A device that converts mechanical motion into electrical signals for position or speed measurement.",
                "A sensor that measures temperature changes in mechanical systems.",
                "A motor controller that adjusts rotational speed in real-time.",
                "A component that amplifies electrical signals for better motor efficiency.",
                30
            ],
            "A rotary optical encoder has a resolution of 400 increments per rotation. How far has it rotated from the start position after 80 increments?": [
                "20% of a full rotation",
                "25% of a full rotation",
                "10% of a full rotation",
                "50% of a full rotation",
                30
            ],
            "What is the difference between incremental and absolute encoders, and what are the advantages of each?": [
                "Incremental encoders need a reference to determine position, while absolute encoders retain position data even when power is lost.",
                "Incremental encoders store absolute position values internally.",
                "Absolute encoders are less precise than incremental encoders.",
                "Incremental encoders provide a continuous position, while absolute encoders count pulses from a reference point.",
                30
            ],
            "Which of the following is NOT a common type of encoder?": [
                "Fluid encoder",
                "Optical encoder",
                "Magnetic encoder",
                "Capacitive encoder",
                20
            ],
            "What is the primary purpose of an optical encoder?": [
                "To track position and speed by detecting changes in light patterns.",
                "To measure temperature variations in mechanical systems.",
                "To convert analogue signals into digital ones for processing.",
                "To amplify electrical signals in sensor networks.",
                25
            ],
            "How does an absolute encoder differ from an incremental encoder in terms of output?": [
                "Absolute encoders provide a unique position value for each shaft position, while incremental encoders output pulses that must be counted.",
                "Incremental encoders output a digital code for each unique position, while absolute encoders output only pulses.",
                "Absolute encoders need a reference point to start counting, while incremental encoders always provide exact position data.",
                "There is no functional difference; they both work the same way.",
                45
            ],
            "What additional component is often required for an incremental encoder to determine an absolute position upon startup?": [
                "A homing or reference sensor",
                "A signal amplifier",
                "A second encoder",
                "A backup battery",
                20
            ],
            "What is a typical use case for a magnetic encoder instead of an optical encoder?": [
                "In environments with high levels of dust or contamination",
                "In applications requiring the highest possible resolution",
                "In consumer-grade office equipment",
                "In systems where weight must be minimized",
                25
            ],
            "Which of the following factors most affects the resolution of an optical encoder?": [
                "The number of divisions on the encoder disk",
                "The colour of the LED light source",
                "The shape of the encoder housing",
                "The material of the encoder disk",
                25
            ]
        };

        // Game state
        let currentQuestionIndex = 0;
        let score = 0;              // cumulative points (0..questions.length*100)
        let questions = [];
        let timer;
        let timeLeft;
        let answered = false;

        // Initialize the quiz
        function initQuiz() {
            // Convert gameData to questions array
            questions = Object.keys(gameData).map(question => {
                const data = gameData[question];
                return {
                    question: question,
                    correctAnswer: data[0],
                    answers: [...data.slice(0, 4)], // First 4 elements are answers
                    timeLimit: data[4] || 30        // 5th element is time limit, default 30s
                };
            });

            // Shuffle questions
            questions = shuffleArray(questions);
            
            // Reset game state
            currentQuestionIndex = 0;
            score = 0;
            answered = false;
            
            // Show first question
            showQuestion();
            updateStats();
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            const currentQuestion = questions[currentQuestionIndex];
            answered = false;
            
            // Update question text
            document.getElementById('question').textContent = currentQuestion.question;
            
            // Shuffle answers for this question
            const shuffledAnswers = shuffleArray(currentQuestion.answers);
            
            // Create answer buttons
            const answersContainer = document.getElementById('answers');
            answersContainer.innerHTML = '';
            
            shuffledAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer;
                button.onclick = () => selectAnswer(answer, currentQuestion.correctAnswer);
                answersContainer.appendChild(button);
            });

            // Hide next button
            document.getElementById('nextBtn').style.display = 'none';
            
            // Start timer
            startTimer(currentQuestion.timeLimit);
            
            // Update progress
            updateProgress();
        }

        function selectAnswer(selectedAnswer, correctAnswer) {
            if (answered) return;
            
            answered = true;
            clearInterval(timer);
            
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(button => {
                button.disabled = true;
                
                if (button.textContent === correctAnswer) {
                    button.classList.add('correct');
                } else if (button.textContent === selectedAnswer && selectedAnswer !== correctAnswer) {
                    button.classList.add('incorrect');
                }
            });
            
            // ‚úÖ Time-based scoring: only if correct
            if (selectedAnswer === correctAnswer) {
                const q = questions[currentQuestionIndex];
                // Ensure non-negative and integer points
                const earned = Math.max(0, Math.floor((timeLeft / q.timeLimit) * 100));
                score += earned;
                updateStats();
            }
            
            // Show next button
            document.getElementById('nextBtn').style.display = 'inline-block';
        }

        function startTimer(seconds) {
            timeLeft = seconds;
            document.getElementById('timeLeft').textContent = timeLeft + 's';
            
            timer = setInterval(() => {
                timeLeft = Math.max(0, timeLeft - 1);
                document.getElementById('timeLeft').textContent = timeLeft + 's';
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    if (!answered) {
                        // Time's up - show correct answer (earns 0 unless user had already selected)
                        selectAnswer('', questions[currentQuestionIndex].correctAnswer);
                    }
                }
            }, 1000);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            showQuestion();
            updateStats();
        }

        function updateStats() {
            document.getElementById('questionNumber').textContent = 
                `${Math.min(currentQuestionIndex + 1, questions.length)} / ${questions.length}`;
            document.getElementById('currentScore').textContent = score;
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showResults() {
            clearInterval(timer);
            
            // Hide quiz content
            document.getElementById('quizContent').style.display = 'none';
            
            // Show results
            const results = document.getElementById('results');
            results.classList.add('show');
            
            // Update final score (out of max)
            const maxScore = questions.length * 100;
            document.getElementById('finalScore').textContent = `${score}/${maxScore}`;
            
            // Update progress to 100%
            document.getElementById('progressFill').style.width = '100%';
            
            // Show appropriate message
            const percentage = (score / maxScore) * 100;
            let message = '';
            
            if (percentage >= 90) {
                message = 'üèÜ Outstanding! You\'re a quiz master!';
            } else if (percentage >= 70) {
                message = 'üéâ Great job! Well done!';
            } else if (percentage >= 50) {
                message = 'üëç Good effort! Keep practicing!';
            } else {
                message = 'üìö Keep studying and try again!';
            }
            
            document.getElementById('scoreMessage').textContent = message;
        }

        function restartQuiz() {
            // Reset display
            document.getElementById('quizContent').style.display = 'block';
            document.getElementById('results').classList.remove('show');
            
            // Restart quiz
            initQuiz();
        }

        // Start the quiz when page loads
        window.onload = initQuiz;
    </script>

    <!-- Cloudflare snippet preserved from your original paste -->
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97627afab7ebb358',t:'MTc1NjM3MDE4MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
